{% extends "base.html" %}

{% block title %}æ”¶æ“šè©³æƒ…{% endblock %}

{% block content %}
<div style="max-width: 700px; margin: 0 auto;">
    <div class="card">
        <h2 class="card-title">ğŸ“„ æ”¶æ“šè©³æƒ…</h2>

        <table class="table">
            <tr>
                <th style="width: 150px;">æ”¶æ“šç·¨è™Ÿ</th>
                <td>{{ receipt.receipt_no }}</td>
            </tr>
            <tr>
                <th>é–‹ç«‹æ—¥æœŸ</th>
                <td>{{ receipt.created_at.strftime('%Y/%m/%d %H:%M:%S') if receipt.created_at else '' }}</td>
            </tr>
            <tr>
                <th>æ”¶è²»é …ç›®</th>
                <td>{{ receipt.item_name }}</td>
            </tr>
            <tr>
                <th>é‡‘é¡</th>
                <td style="font-size: 1.2rem; font-weight: bold; color: #1a5276;">
                    ${{ receipt.amount|int }} å…ƒ
                </td>
            </tr>
            <tr>
                <th>åœ‹å­—é‡‘é¡</th>
                <td>{{ receipt.amount_chinese }}</td>
            </tr>
            <tr>
                <th>å‚™è¨»</th>
                <td>{{ receipt.remark or '-' }}</td>
            </tr>
            <tr>
                <th>ç¶“è¾¦å“¡</th>
                <td>{{ receipt.operator_name }}</td>
            </tr>
            <tr>
                <th>ç‹€æ…‹</th>
                <td>
                    {% if receipt.status == 'active' %}
                    <span class="badge badge-success">æ­£å¸¸</span>
                    {% elif receipt.status == 'void_pending' %}
                    <span class="badge badge-warning">å¾…å¯©æ ¸ä½œå»¢</span>
                    {% else %}
                    <span class="badge badge-danger">å·²ä½œå»¢</span>
                    {% endif %}
                </td>
            </tr>
            <tr>
                <th>é©—è­‰ç‹€æ…‹</th>
                <td>
                    {% if receipt.is_verified %}
                    <span class="badge badge-success">å·²é©—è­‰</span>
                    <br><small>é©—è­‰æ™‚é–“: {{ receipt.verified_at.strftime('%Y/%m/%d %H:%M') if receipt.verified_at else '' }}</small>
                    {% else %}
                    <span class="badge badge-secondary">æœªé©—è­‰</span>
                    {% endif %}
                </td>
            </tr>
            {% if receipt.status == 'voided' %}
            <tr>
                <th>ä½œå»¢åŸå› </th>
                <td style="color: #e74c3c;">{{ receipt.void_reason }}</td>
            </tr>
            <tr>
                <th>ä½œå»¢æ™‚é–“</th>
                <td>{{ receipt.voided_at.strftime('%Y/%m/%d %H:%M') if receipt.voided_at else '' }}</td>
            </tr>
            {% endif %}
        </table>

        <div class="d-flex gap-1 mt-2">
            <a href="{{ url_for('receipt.print_receipt', receipt_id=receipt.id) }}" class="btn btn-primary">åˆ—å°æ”¶æ“š</a>
            <a href="{{ url_for('receipt.download_pdf', receipt_id=receipt.id) }}" class="btn btn-secondary">ä¸‹è¼‰PDF</a>
            {% if receipt.can_void %}
            <a href="{{ url_for('void.request_void', receipt_id=receipt.id) }}" class="btn btn-danger">ç”³è«‹ä½œå»¢</a>
            {% endif %}
            <a href="{{ url_for('receipt.index') }}" class="btn btn-secondary">è¿”å›åˆ—è¡¨</a>
        </div>
    </div>
</div>
{% endblock %}
