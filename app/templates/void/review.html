{% extends "base.html" %}

{% block title %}å¯©æ ¸ä½œå»¢ç”³è«‹{% endblock %}

{% block content %}
<div style="max-width: 700px; margin: 0 auto;">
    <div class="card">
        <h2 class="card-title">ğŸ” å¯©æ ¸ä½œå»¢ç”³è«‹</h2>

        <div style="background: #f8f9fa; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
            <h4 style="margin-bottom: 0.5rem;">æ”¶æ“šè³‡è¨Š</h4>
            <p><strong>æ”¶æ“šç·¨è™Ÿï¼š</strong>
                <a href="{{ url_for('receipt.view', receipt_id=void_request.receipt.id) }}">
                    {{ void_request.receipt.receipt_no }}
                </a>
            </p>
            <p><strong>æ”¶è²»é …ç›®ï¼š</strong>{{ void_request.receipt.item_name }}</p>
            <p><strong>é‡‘é¡ï¼š</strong><span style="font-size: 1.2rem; font-weight: bold; color: #e74c3c;">${{ void_request.receipt.amount|int }}</span></p>
            <p><strong>é–‹ç«‹æ™‚é–“ï¼š</strong>{{ void_request.receipt.created_at.strftime('%Y/%m/%d %H:%M') if void_request.receipt.created_at else '' }}</p>
            <p><strong>ç¶“è¾¦å“¡ï¼š</strong>{{ void_request.receipt.operator_name }}</p>
        </div>

        <div style="background: #e3f2fd; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
            <h4 style="margin-bottom: 0.5rem;">ç”³è«‹è³‡è¨Š</h4>
            <p><strong>ç”³è«‹äººï¼š</strong>{{ void_request.requester.full_name }}</p>
            <p><strong>ç”³è«‹æ™‚é–“ï¼š</strong>{{ void_request.requested_at.strftime('%Y/%m/%d %H:%M') if void_request.requested_at else '' }}</p>
            <p><strong>ä½œå»¢åŸå› ï¼š</strong></p>
            <div style="background: white; padding: 0.75rem; border-radius: 4px; margin-top: 0.5rem;">
                {{ void_request.reason }}
            </div>
        </div>

        <form method="POST">
            <div class="form-group">
                <label for="note">å¯©æ ¸å‚™è¨» (é¸å¡«)</label>
                <textarea id="note" name="note" class="form-control" rows="2"
                          placeholder="å¦‚æœ‰éœ€è¦å¯å¡«å¯«å¯©æ ¸å‚™è¨»"></textarea>
            </div>

            <div class="d-flex gap-1">
                <button type="submit" name="action" value="approve" class="btn btn-success"
                        onclick="return confirm('ç¢ºå®šè¦æ ¸å‡†æ­¤ä½œå»¢ç”³è«‹å—ï¼Ÿæ”¶æ“šå°‡è¢«æ¨™è¨˜ç‚ºå·²ä½œå»¢ã€‚')">
                    âœ“ æ ¸å‡†ä½œå»¢
                </button>
                <button type="submit" name="action" value="reject" class="btn btn-danger"
                        onclick="return confirm('ç¢ºå®šè¦é§å›æ­¤ä½œå»¢ç”³è«‹å—ï¼Ÿ')">
                    âœ• é§å›ç”³è«‹
                </button>
                <a href="{{ url_for('void.index') }}" class="btn btn-secondary">è¿”å›</a>
            </div>
        </form>
    </div>
</div>
{% endblock %}
