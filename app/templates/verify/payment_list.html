{% extends "base.html" %}

{% block title %}ç¹³æ¬¾ç´€éŒ„{% endblock %}

{% block content %}
<div class="card">
    <h2 class="card-title">ğŸ“‹ ç¹³æ¬¾ç´€éŒ„</h2>
</div>

<div class="card">
    {% if payments %}
    <table class="table">
        <thead>
            <tr>
                <th>ç¹³æ¬¾æ—¥æœŸ</th>
                <th>æ“ä½œå“¡</th>
                <th>æœŸé–“</th>
                <th class="text-right">ç³»çµ±é‡‘é¡</th>
                <th class="text-right">å¯¦ç¹³é‡‘é¡</th>
                <th class="text-right">å·®ç•°</th>
                <th>æ”¶æ¬¾äºº</th>
                <th>å‚™è¨»</th>
            </tr>
        </thead>
        <tbody>
            {% for payment in payments %}
            <tr>
                <td>{{ payment.received_at.strftime('%Y/%m/%d %H:%M') if payment.received_at else '' }}</td>
                <td>{{ payment.operator.full_name }}</td>
                <td>{{ payment.period_start.strftime('%m/%d') }} ~ {{ payment.period_end.strftime('%m/%d') }}</td>
                <td class="text-right">${{ payment.system_amount|int }}</td>
                <td class="text-right">${{ payment.actual_amount|int }}</td>
                <td class="text-right">
                    {% if payment.difference and payment.difference != 0 %}
                        {% if payment.difference > 0 %}
                        <span style="color: #27ae60;">+${{ payment.difference|int }}</span>
                        {% else %}
                        <span style="color: #e74c3c;">${{ payment.difference|int }}</span>
                        {% endif %}
                    {% else %}
                    -
                    {% endif %}
                </td>
                <td>{{ payment.receiver.full_name }}</td>
                <td>{{ payment.notes or '-' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p class="text-center" style="padding: 2rem; color: #666;">ç›®å‰æ²’æœ‰ç¹³æ¬¾ç´€éŒ„</p>
    {% endif %}
</div>

<a href="{{ url_for('verify.index') }}" class="btn btn-secondary">è¿”å›</a>
{% endblock %}
