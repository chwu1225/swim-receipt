# 🏊 游泳池收費收據系統 - 完整規劃書

> **規劃日期**: 2026-01-16
> **狀態**: 待確認執行
> **模式**: Brainstorm + Ultrathink + Research

---

## 📋 一、需求總覽

### 1.1 業務背景
臺北市立大學游泳池需要一套收費收據系統，用於：
- 櫃台人員開立收據給使用者
- 收取現金後每月彙整繳給出納
- 出納可登入系統進行驗證對帳
- 開錯單時可申請作廢（需審核）

### 1.2 確定需求
| 需求項目 | 說明 |
|----------|------|
| 收費類型 | 單次入場為主 + 多元票券（月票/季票/回數票等） |
| 列印方式 | 普通 A4 印表機，沿用現有繳費證明單風格 |
| 出納驗證 | 出納需登入系統進行逐筆驗證確認 |
| 錯誤處理 | 作廢需審核機制（保留完整稽核軌跡） |

---

## 🎯 二、系統功能模組

### 2.1 功能架構圖
```
┌─────────────────────────────────────────────────────────────┐
│                    游泳池收費收據系統                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │  收據開立   │  │  統計報表   │  │  出納驗證   │         │
│  │  模組       │  │  模組       │  │  模組       │         │
│  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘         │
│         │                │                │                 │
│  ┌──────┴──────┐  ┌──────┴──────┐  ┌──────┴──────┐         │
│  │ • 選擇項目  │  │ • 日報表    │  │ • 登入驗證  │         │
│  │ • 輸入金額  │  │ • 月報表    │  │ • 逐筆核對  │         │
│  │ • 列印收據  │  │ • 區間查詢  │  │ • 批次確認  │         │
│  │ • 重印功能  │  │ • 匯出Excel │  │ • 繳款紀錄  │         │
│  └─────────────┘  └─────────────┘  └─────────────┘         │
│                                                             │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │
│  │  作廢管理   │  │  基礎資料   │  │  系統管理   │         │
│  │  模組       │  │  模組       │  │  模組       │         │
│  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘         │
│         │                │                │                 │
│  ┌──────┴──────┐  ┌──────┴──────┐  ┌──────┴──────┐         │
│  │ • 申請作廢  │  │ • 收費項目  │  │ • 使用者管理│         │
│  │ • 審核作廢  │  │ • 票價設定  │  │ • 角色權限  │         │
│  │ • 作廢紀錄  │  │ • 操作員    │  │ • 操作日誌  │         │
│  └─────────────┘  └─────────────┘  └─────────────┘         │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 2.2 功能詳細規格

#### 📝 Module 1: 收據開立
| 功能 | 說明 | 優先級 |
|------|------|--------|
| 選擇收費項目 | 下拉選單選擇票種/身份 | P0 |
| 輸入金額 | 可手動輸入或自動帶入預設金額 | P0 |
| 備註欄位 | 可選填額外說明 | P1 |
| 預覽收據 | 送出前預覽內容 | P1 |
| 列印收據 | 產生 PDF 並送印 | P0 |
| 重印收據 | 查詢已開收據重新列印 | P1 |

#### 📊 Module 2: 統計報表
| 報表類型 | 內容 | 優先級 |
|----------|------|--------|
| 日報表 | 當日所有收據明細 + 小計 | P0 |
| 月報表 | 當月彙整 + 各項目統計 | P0 |
| 區間報表 | 自訂日期範圍查詢 | P1 |
| 操作員報表 | 按操作員分類統計 | P1 |
| 匯出功能 | Excel / PDF 匯出 | P1 |

#### ✅ Module 3: 出納驗證
| 功能 | 說明 | 優先級 |
|------|------|--------|
| 出納登入 | 專用帳號權限 | P0 |
| 待驗證清單 | 顯示未驗證收據 | P0 |
| 逐筆核對 | 點選確認已收現金 | P0 |
| 批次確認 | 整批驗證通過 | P1 |
| 繳款紀錄 | 記錄每次繳款日期/金額 | P0 |
| 差異報表 | 系統金額 vs 實收金額比對 | P1 |

#### ❌ Module 4: 作廢管理
| 功能 | 說明 | 優先級 |
|------|------|--------|
| 申請作廢 | 操作員提出作廢申請 + 原因 | P0 |
| 審核作廢 | 主管/出納審核通過 | P0 |
| 作廢紀錄 | 完整保留原始資料 + 作廢原因 | P0 |
| 作廢限制 | 已驗證收據不可作廢 | P0 |

#### ⚙️ Module 5: 基礎資料
| 功能 | 說明 | 優先級 |
|------|------|--------|
| 收費項目管理 | 新增/修改/停用項目 | P0 |
| 票價設定 | 各項目對應金額 | P0 |
| 操作員管理 | 帳號/姓名/權限 | P0 |

---

## 🗄️ 三、資料庫設計

### 3.1 ER Diagram 概念
```
┌──────────────┐       ┌──────────────┐       ┌──────────────┐
│    Users     │       │   Receipts   │       │  Fee_Items   │
├──────────────┤       ├──────────────┤       ├──────────────┤
│ user_id (PK) │       │ receipt_id   │       │ item_id (PK) │
│ username     │       │ receipt_no   │◄──────│ item_name    │
│ password     │       │ item_id (FK) │       │ default_price│
│ full_name    │       │ amount       │       │ category     │
│ role         │──────►│ operator_id  │       │ is_active    │
│ is_active    │       │ created_at   │       └──────────────┘
└──────────────┘       │ status       │
                       │ verified_by  │       ┌──────────────┐
                       │ verified_at  │       │ Void_Records │
                       │ void_reason  │       ├──────────────┤
                       │ voided_by    │       │ void_id (PK) │
                       │ voided_at    │◄──────│ receipt_id   │
                       └──────────────┘       │ reason       │
                                              │ requested_by │
┌──────────────┐                              │ approved_by  │
│   Payments   │                              │ status       │
├──────────────┤                              │ created_at   │
│ payment_id   │                              └──────────────┘
│ operator_id  │
│ period_start │
│ period_end   │
│ total_amount │
│ received_by  │
│ received_at  │
│ notes        │
└──────────────┘
```

### 3.2 資料表詳細設計

#### Table: users (使用者)
```sql
CREATE TABLE users (
    user_id         INT PRIMARY KEY IDENTITY(1,1),
    username        VARCHAR(50) NOT NULL UNIQUE,
    password_hash   VARCHAR(255) NOT NULL,
    full_name       NVARCHAR(50) NOT NULL,
    role            VARCHAR(20) NOT NULL,  -- 'operator', 'supervisor', 'cashier', 'admin'
    is_active       BIT DEFAULT 1,
    created_at      DATETIME DEFAULT GETDATE(),
    updated_at      DATETIME
);
```

#### Table: fee_items (收費項目)
```sql
CREATE TABLE fee_items (
    item_id         INT PRIMARY KEY IDENTITY(1,1),
    item_code       VARCHAR(20) NOT NULL UNIQUE,
    item_name       NVARCHAR(100) NOT NULL,
    category        NVARCHAR(50),           -- '入場券', '票券', '課程', '租借'
    identity_type   NVARCHAR(50),           -- '學生', '教職員', '校外人士', '優惠票'
    default_price   DECIMAL(10,2) NOT NULL,
    description     NVARCHAR(200),
    is_active       BIT DEFAULT 1,
    sort_order      INT DEFAULT 0,
    created_at      DATETIME DEFAULT GETDATE()
);
```

#### Table: receipts (收據)
```sql
CREATE TABLE receipts (
    receipt_id      INT PRIMARY KEY IDENTITY(1,1),
    receipt_no      VARCHAR(20) NOT NULL UNIQUE,  -- 收據編號 SWIM-YYYYMMDD-XXXX
    item_id         INT NOT NULL FOREIGN KEY REFERENCES fee_items(item_id),
    item_name       NVARCHAR(100) NOT NULL,       -- 冗餘欄位，保留開立時名稱
    amount          DECIMAL(10,2) NOT NULL,
    amount_chinese  NVARCHAR(50),                 -- 國字大寫金額
    remark          NVARCHAR(200),

    -- 操作資訊
    operator_id     INT NOT NULL FOREIGN KEY REFERENCES users(user_id),
    operator_name   NVARCHAR(50) NOT NULL,        -- 冗餘欄位
    created_at      DATETIME DEFAULT GETDATE(),

    -- 狀態
    status          VARCHAR(20) DEFAULT 'active', -- 'active', 'void_pending', 'voided'

    -- 驗證資訊
    is_verified     BIT DEFAULT 0,
    verified_by     INT FOREIGN KEY REFERENCES users(user_id),
    verified_at     DATETIME,

    -- 作廢資訊
    void_reason     NVARCHAR(200),
    voided_by       INT FOREIGN KEY REFERENCES users(user_id),
    voided_at       DATETIME
);
```

#### Table: void_requests (作廢申請)
```sql
CREATE TABLE void_requests (
    request_id      INT PRIMARY KEY IDENTITY(1,1),
    receipt_id      INT NOT NULL FOREIGN KEY REFERENCES receipts(receipt_id),
    reason          NVARCHAR(500) NOT NULL,
    requested_by    INT NOT NULL FOREIGN KEY REFERENCES users(user_id),
    requested_at    DATETIME DEFAULT GETDATE(),

    status          VARCHAR(20) DEFAULT 'pending', -- 'pending', 'approved', 'rejected'
    reviewed_by     INT FOREIGN KEY REFERENCES users(user_id),
    reviewed_at     DATETIME,
    review_note     NVARCHAR(200)
);
```

#### Table: payment_records (繳款紀錄)
```sql
CREATE TABLE payment_records (
    payment_id      INT PRIMARY KEY IDENTITY(1,1),
    operator_id     INT NOT NULL FOREIGN KEY REFERENCES users(user_id),
    period_start    DATE NOT NULL,
    period_end      DATE NOT NULL,

    system_amount   DECIMAL(12,2) NOT NULL,       -- 系統計算金額
    actual_amount   DECIMAL(12,2) NOT NULL,       -- 實際繳交金額
    difference      DECIMAL(12,2),                -- 差額

    received_by     INT NOT NULL FOREIGN KEY REFERENCES users(user_id),
    received_at     DATETIME DEFAULT GETDATE(),
    notes           NVARCHAR(500)
);
```

### 3.3 索引設計
```sql
-- 常用查詢索引
CREATE INDEX idx_receipts_created_at ON receipts(created_at);
CREATE INDEX idx_receipts_operator ON receipts(operator_id);
CREATE INDEX idx_receipts_status ON receipts(status);
CREATE INDEX idx_receipts_verified ON receipts(is_verified);
CREATE INDEX idx_void_requests_status ON void_requests(status);
```

---

## 🖼️ 四、收據格式設計

### 4.1 收據樣式（參考現有繳費證明單改造）

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│              臺北市立大學 游泳池收費收據                      │
│                                                             │
│                                        115/01/16 14:30:00   │
│                                        收據編號: SWIM-20260116-0001│
│  ───────────────────────────────────────────────────────── │
│                                                             │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  收  費  項  目           │  金  額  │  備    註  │   │
│  ├─────────────────────────────────────────────────────┤   │
│  │  游泳池入場券-學生         │     50   │            │   │
│  │                           │          │            │   │
│  │                           │          │            │   │
│  │                           │          │            │   │
│  └─────────────────────────────────────────────────────┘   │
│                                                             │
│         合    計：    50 元                                 │
│                                                             │
│         新台幣：  伍拾元整                                   │
│                                                             │
│  ───────────────────────────────────────────────────────── │
│                                                             │
│  經辦員：王小明                        [游泳池收費專用章]    │
│                                                             │
│  ───────────────────────────────────────────────────────── │
│  本收據為游泳池現金收費證明，請妥善保管                       │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 收據欄位說明
| 欄位 | 來源 | 說明 |
|------|------|------|
| 標題 | 固定 | 臺北市立大學 游泳池收費收據 |
| 日期時間 | 系統產生 | 開立當下時間 |
| 收據編號 | 系統產生 | SWIM-YYYYMMDD-序號 |
| 收費項目 | 選擇 | 從 fee_items 選取 |
| 金額 | 輸入/預設 | 可修改或用預設金額 |
| 備註 | 選填 | 額外說明 |
| 合計 | 計算 | 自動加總 |
| 國字金額 | 轉換 | 系統自動轉換 |
| 經辦員 | 系統 | 登入操作員姓名 |

---

## 🔐 五、權限設計

### 5.1 角色定義
| 角色 | 代碼 | 說明 |
|------|------|------|
| 操作員 | operator | 櫃台人員，開立收據 |
| 主管 | supervisor | 審核作廢申請 |
| 出納 | cashier | 驗證收據、收款確認 |
| 管理員 | admin | 系統設定、全部權限 |

### 5.2 功能權限矩陣
| 功能 | operator | supervisor | cashier | admin |
|------|:--------:|:----------:|:-------:|:-----:|
| 開立收據 | ✅ | ✅ | ❌ | ✅ |
| 查詢收據 | ✅ | ✅ | ✅ | ✅ |
| 重印收據 | ✅ | ✅ | ✅ | ✅ |
| 申請作廢 | ✅ | ✅ | ❌ | ✅ |
| 審核作廢 | ❌ | ✅ | ✅ | ✅ |
| 驗證收據 | ❌ | ❌ | ✅ | ✅ |
| 繳款確認 | ❌ | ❌ | ✅ | ✅ |
| 查看報表 | ✅(自己) | ✅ | ✅ | ✅ |
| 匯出報表 | ❌ | ✅ | ✅ | ✅ |
| 管理收費項目 | ❌ | ❌ | ❌ | ✅ |
| 管理使用者 | ❌ | ❌ | ❌ | ✅ |

---

## 🔄 六、業務流程設計

### 6.1 開立收據流程
```
┌─────────────┐
│  操作員登入  │
└──────┬──────┘
       ▼
┌─────────────┐
│ 選擇收費項目 │ ←── 系統帶入預設金額
└──────┬──────┘
       ▼
┌─────────────┐
│ 確認/修改金額│
└──────┬──────┘
       ▼
┌─────────────┐
│ 填寫備註(選)│
└──────┬──────┘
       ▼
┌─────────────┐
│  預覽收據   │
└──────┬──────┘
       ▼
┌─────────────┐
│  確認送出   │ ──→ 產生收據編號
└──────┬──────┘     寫入資料庫
       ▼
┌─────────────┐
│  列印收據   │ ──→ 產生 PDF
└─────────────┘     送印表機
```

### 6.2 作廢申請流程
```
┌─────────────┐
│ 操作員查詢  │
│ 需作廢收據  │
└──────┬──────┘
       ▼
┌─────────────┐     ┌─────────────┐
│ 檢查是否已  │──是─►│ 拒絕：已驗證│
│ 被出納驗證  │     │ 收據不可作廢│
└──────┬──────┘     └─────────────┘
       │否
       ▼
┌─────────────┐
│ 填寫作廢原因│
└──────┬──────┘
       ▼
┌─────────────┐
│ 提交作廢申請│ ──→ status = 'void_pending'
└──────┬──────┘
       ▼
┌─────────────┐     ┌─────────────┐
│ 主管/出納   │──駁回►│ 通知操作員  │
│ 審核申請    │     │ 駁回原因    │
└──────┬──────┘     └─────────────┘
       │核准
       ▼
┌─────────────┐
│ 收據標記作廢│ ──→ status = 'voided'
│ 保留原始資料│     記錄審核資訊
└─────────────┘
```

### 6.3 月結繳款流程
```
┌─────────────┐
│ 月底結算    │ ←── 操作員產生月報表
└──────┬──────┘
       ▼
┌─────────────┐
│ 列印月報表  │ ──→ 顯示本月收款總額
│ 核對現金    │     扣除作廢金額
└──────┬──────┘
       ▼
┌─────────────┐
│ 攜帶現金    │
│ 至出納組    │
└──────┬──────┘
       ▼
┌─────────────┐
│ 出納登入系統│
└──────┬──────┘
       ▼
┌─────────────┐
│ 逐筆或批次  │ ──→ 標記收據已驗證
│ 驗證收據    │
└──────┬──────┘
       ▼
┌─────────────┐
│ 確認繳款金額│ ──→ 建立繳款紀錄
│ 記錄差異    │     payment_records
└─────────────┘
```

---

## 🛠️ 七、技術架構

### 7.1 技術選型
| 層級 | 技術 | 說明 |
|------|------|------|
| **Frontend** | HTML + CSS + JavaScript | 簡單直覺的操作介面 |
| **Backend** | Python Flask | 輕量快速開發 |
| **Database** | SQLite (開發) / Sybase (正式) | 可整合校務系統 |
| **PDF 產生** | ReportLab / WeasyPrint | A4 收據格式 |
| **列印** | 瀏覽器列印 / PDF | 標準列印流程 |

### 7.2 專案結構
```
swim/
├── app/
│   ├── __init__.py           # Flask app 初始化
│   ├── config.py             # 設定檔
│   ├── models/               # 資料模型
│   │   ├── __init__.py
│   │   ├── user.py
│   │   ├── fee_item.py
│   │   ├── receipt.py
│   │   └── payment.py
│   ├── routes/               # 路由控制
│   │   ├── __init__.py
│   │   ├── auth.py           # 登入/登出
│   │   ├── receipt.py        # 收據管理
│   │   ├── report.py         # 報表
│   │   ├── verify.py         # 出納驗證
│   │   ├── void.py           # 作廢管理
│   │   └── admin.py          # 系統管理
│   ├── services/             # 業務邏輯
│   │   ├── __init__.py
│   │   ├── receipt_service.py
│   │   ├── pdf_service.py
│   │   ├── report_service.py
│   │   └── number_chinese.py # 金額轉國字
│   ├── templates/            # HTML 模板
│   │   ├── base.html
│   │   ├── login.html
│   │   ├── receipt/
│   │   │   ├── create.html
│   │   │   ├── list.html
│   │   │   └── print.html
│   │   ├── report/
│   │   │   ├── daily.html
│   │   │   └── monthly.html
│   │   ├── verify/
│   │   │   └── index.html
│   │   ├── void/
│   │   │   ├── request.html
│   │   │   └── review.html
│   │   └── admin/
│   │       ├── users.html
│   │       └── fee_items.html
│   └── static/               # 靜態資源
│       ├── css/
│       ├── js/
│       └── images/
├── migrations/               # 資料庫遷移
├── tests/                    # 測試
├── requirements.txt
├── run.py
└── README.md
```

### 7.3 收據 PDF 產生流程
```python
# services/pdf_service.py 概念
class ReceiptPDFService:
    def generate(self, receipt):
        """產生收據 PDF"""
        # 1. 載入模板 (參考現有繳費證明單格式)
        # 2. 填入收據資料
        # 3. 轉換金額為國字
        # 4. 產生 PDF
        # 5. 回傳 PDF bytes 或儲存檔案
```

---

## 📊 八、報表設計

### 8.1 日報表
```
┌─────────────────────────────────────────────────────────────┐
│         臺北市立大學游泳池 - 日收費明細表                      │
│                                                             │
│  日期: 115/01/16                     操作員: 王小明          │
│  ───────────────────────────────────────────────────────── │
│  序號 │ 收據編號              │ 收費項目    │ 金額 │ 狀態   │
│  ───────────────────────────────────────────────────────── │
│   1  │ SWIM-20260116-0001   │ 入場-學生   │  50 │ 正常   │
│   2  │ SWIM-20260116-0002   │ 入場-教職員 │  80 │ 正常   │
│   3  │ SWIM-20260116-0003   │ 入場-校外   │ 150 │ 作廢   │
│   4  │ SWIM-20260116-0004   │ 月票-學生   │ 800 │ 正常   │
│  ...                                                        │
│  ───────────────────────────────────────────────────────── │
│  正常收據合計:  25 筆    金額: 12,500 元                     │
│  作廢收據:       2 筆    金額:    300 元                     │
│  ───────────────────────────────────────────────────────── │
│  應繳金額:              12,500 元                           │
└─────────────────────────────────────────────────────────────┘
```

### 8.2 月報表（月結繳款用）
```
┌─────────────────────────────────────────────────────────────┐
│         臺北市立大學游泳池 - 月收費彙整表                      │
│                                                             │
│  期間: 115/01/01 ~ 115/01/31          操作員: 王小明         │
│  ───────────────────────────────────────────────────────── │
│                     收費項目統計                             │
│  ───────────────────────────────────────────────────────── │
│  項目名稱              │ 筆數  │ 金額      │ 佔比           │
│  ───────────────────────────────────────────────────────── │
│  入場券-學生           │  180  │   9,000   │  18.0%        │
│  入場券-教職員         │   90  │   7,200   │  14.4%        │
│  入場券-校外人士       │   60  │   9,000   │  18.0%        │
│  月票-學生             │   25  │  20,000   │  40.0%        │
│  月票-教職員           │   12  │   4,800   │   9.6%        │
│  ───────────────────────────────────────────────────────── │
│  小計 (正常)           │  367  │  50,000   │ 100.0%        │
│  作廢                  │    5  │     800   │   ---         │
│  ───────────────────────────────────────────────────────── │
│  應繳總額:                     50,000 元                    │
│  新台幣: 伍萬元整                                           │
│  ───────────────────────────────────────────────────────── │
│                                                             │
│  操作員簽章:____________    出納簽章:____________           │
│                                                             │
│  繳款日期:____________      收款金額:____________           │
└─────────────────────────────────────────────────────────────┘
```

---

## 📌 九、預設收費項目建議

### 9.1 入場券類
| 項目代碼 | 項目名稱 | 身份類型 | 建議金額 | 說明 |
|----------|----------|----------|----------|------|
| ADM-STU | 游泳池入場券-學生 | 學生 | 50 | 單次入場 |
| ADM-STAFF | 游泳池入場券-教職員 | 教職員 | 80 | 單次入場 |
| ADM-EXT | 游泳池入場券-校外人士 | 校外人士 | 150 | 單次入場 |
| ADM-SENIOR | 游泳池入場券-敬老優惠 | 優惠票 | 50 | 65歲以上 |
| ADM-DISABLED | 游泳池入場券-愛心優惠 | 優惠票 | 50 | 身心障礙 |

### 9.2 票券類
| 項目代碼 | 項目名稱 | 身份類型 | 建議金額 | 說明 |
|----------|----------|----------|----------|------|
| PASS-M-STU | 游泳池月票-學生 | 學生 | 800 | 當月無限次 |
| PASS-M-STAFF | 游泳池月票-教職員 | 教職員 | 600 | 當月無限次 |
| PASS-M-EXT | 游泳池月票-校外人士 | 校外人士 | 2,000 | 當月無限次 |
| PASS-S-STU | 游泳池季票-學生 | 學生 | 2,000 | 三個月 |
| PASS-10-STU | 游泳池10次券-學生 | 學生 | 400 | 10次入場 |

### 9.3 其他收入
| 項目代碼 | 項目名稱 | 類別 | 建議金額 | 說明 |
|----------|----------|------|----------|------|
| RENT-LANE | 水道租借費 | 租借 | 500/時 | 單一水道 |
| RENT-POOL | 場地租借費 | 租借 | 依洽談 | 整場租借 |
| COURSE-FEE | 游泳教學課程費 | 課程 | 依課程 | 教學收入 |
| LOCKER-FEE | 置物櫃租金 | 租借 | 50 | 臨時租借 |
| MISC | 其他收入 | 其他 | 依實際 | 雜項收入 |

---

## 🚀 十、實作階段規劃

### Phase 1: 基礎建設 (核心功能)
| 工作項目 | 優先級 | 說明 |
|----------|--------|------|
| 專案架構建立 | P0 | Flask 專案結構 |
| 資料庫建立 | P0 | SQLite 開發環境 |
| 使用者認證 | P0 | 登入/登出功能 |
| 收費項目管理 | P0 | 基礎資料 CRUD |
| 收據開立功能 | P0 | 核心業務功能 |
| 收據列印 (PDF) | P0 | A4 格式 PDF |

### Phase 2: 報表與驗證
| 工作項目 | 優先級 | 說明 |
|----------|--------|------|
| 日報表 | P0 | 每日明細 |
| 月報表 | P0 | 月結彙整 |
| 出納驗證功能 | P0 | 逐筆/批次驗證 |
| 繳款紀錄 | P0 | 繳款記錄管理 |

### Phase 3: 作廢與進階
| 工作項目 | 優先級 | 說明 |
|----------|--------|------|
| 作廢申請 | P0 | 操作員申請 |
| 作廢審核 | P0 | 主管/出納審核 |
| 收據重印 | P1 | 查詢重印 |
| 區間報表 | P1 | 自訂日期查詢 |
| Excel 匯出 | P1 | 報表匯出 |

### Phase 4: 優化與部署
| 工作項目 | 優先級 | 說明 |
|----------|--------|------|
| UI/UX 優化 | P1 | 操作體驗改善 |
| 操作日誌 | P1 | 稽核追蹤 |
| 測試與除錯 | P0 | 完整測試 |
| 文件撰寫 | P1 | 使用手冊 |
| 正式部署 | P0 | 上線運作 |

---

## ❓ 十一、待確認事項

### 11.1 業務面待確認
| 項目 | 問題 | 預設建議 |
|------|------|----------|
| 收費項目 | 實際票種與金額？ | 先用建議值，可後續調整 |
| 收據編號 | 編號規則是否 OK？ | SWIM-YYYYMMDD-序號 |
| 月結日期 | 每月幾號結算？ | 每月最後一天 |
| 審核人員 | 誰有權審核作廢？ | 主管 + 出納 |

### 11.2 技術面待確認
| 項目 | 問題 | 建議 |
|------|------|------|
| 資料庫 | 開發用 SQLite，正式要整合 Sybase？ | 先 SQLite，可轉換 |
| 部署環境 | 校內伺服器還是獨立主機？ | 待確認 |
| 登入整合 | 要整合校務 SSO？ | 先獨立帳號 |
| 印表機 | 指定印表機還是系統預設？ | 瀏覽器選擇 |

---

## 📝 十二、執行確認

### 確認執行前的 Checklist
- [ ] 收費項目與金額確認
- [ ] 收據格式確認
- [ ] 權限角色確認
- [ ] 審核流程確認
- [ ] 技術架構確認

---

**⏸️ 等待確認**：請確認以上規劃內容，如有需要調整的地方請告知，確認後輸入「確認」或「執行」開始實作。
